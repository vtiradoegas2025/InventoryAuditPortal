# ============================================
# Inventory Audit Portal - Environment Variables
# ============================================
# Copy this file to .env and customize for your environment
# DO NOT commit .env to version control (already in .gitignore)
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your values
#   docker-compose -f docker-compose.prod.yaml up -d
#
# ============================================

# ============================================
# Database Configuration
# ============================================
# IMPORTANT: DATABASE_PASSWORD must match in both:
#   - docker-compose.prod.yaml (POSTGRES_PASSWORD)
#   - application.yaml (spring.datasource.password)
# Default: invpass (for local development only - CHANGE IN PRODUCTION!)
DATABASE_NAME=invdb
DATABASE_USERNAME=invuser
DATABASE_PASSWORD=invpass

# Database connection URL (for local development)
# In Docker, backend connects to postgres:5432 automatically
DATABASE_URL=jdbc:postgresql://localhost:5432/invdb

# ============================================
# Server Ports
# ============================================
DB_PORT=5432
BACKEND_PORT=8080
FRONTEND_PORT=3000

# ============================================
# JWT Configuration
# ============================================
# IMPORTANT: Use a strong, random secret in production (minimum 32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=DEMO_SECRET_KEY_CHANGE_IN_PRODUCTION_MINIMUM_32_CHARACTERS_REQUIRED
JWT_EXPIRATION=86400000

# ============================================
# Admin Configuration
# ============================================
# For local testing only - DISABLE in production or use strong password
ADMIN_EMAIL=admin@example.com
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123!
ADMIN_ENABLED=true

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins
# Update for production with your actual frontend domain(s)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# ============================================
# Application Settings
# ============================================
# Database schema management: validate (production) or update (development)
DDL_AUTO=validate

# Flyway migrations: true (recommended) or false
FLYWAY_ENABLED=true

# Swagger/OpenAPI UI: true (development) or false (production)
SWAGGER_ENABLED=true

# Logging level: DEBUG, INFO, WARN, ERROR
LOG_LEVEL=INFO

# Log file path (absolute or relative to application directory)
LOG_FILE=logs/inventory-audit-portal.log

# ============================================
# Email Configuration (Optional)
# ============================================
# Set EMAIL_ENABLED=true and configure SMTP for password reset functionality
EMAIL_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
EMAIL_FROM=noreply@inventory-audit-portal.com

# Frontend URL for password reset links
FRONTEND_URL=http://localhost:3000

# ============================================
# Demo Mode
# ============================================
# Set to false in production
DEMO_MODE=true

# ============================================
# Frontend Configuration
# ============================================
# API base URL for frontend (relative path when behind reverse proxy)
VITE_API_BASE_URL=/api

# ============================================
# Connection Pool Settings (Optional)
# ============================================
HIKARI_MAX_POOL_SIZE=20
HIKARI_MIN_IDLE=5
HIKARI_CONNECTION_TIMEOUT=30000
HIKARI_IDLE_TIMEOUT=600000
HIKARI_MAX_LIFETIME=1800000

# ============================================
# Health Check Settings (Optional)
# ============================================
HEALTH_SHOW_DETAILS=when-authorized

# ============================================
# Production Checklist
# ============================================
# Before deploying to production, ensure:
# [ ] DATABASE_PASSWORD is strong and unique
# [ ] JWT_SECRET is randomly generated (min 32 chars)
# [ ] ADMIN_ENABLED is false OR ADMIN_PASSWORD is strong
# [ ] SWAGGER_ENABLED is false
# [ ] DEMO_MODE is false
# [ ] CORS_ALLOWED_ORIGINS contains only your production domains
# [ ] EMAIL_ENABLED is true and SMTP credentials are configured
# [ ] DDL_AUTO is set to "validate" (not "update")
# [ ] LOG_LEVEL is INFO or WARN (not DEBUG)
# [ ] All secrets are stored securely (not in .env file in production)
